<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><title>React实现MergeRequest管理 | LiuYang's blog</title><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="[object Object]"><meta name="designer" content="minfive"><meta name="keywords" content="前端, 程序员, Android, Flutter, Kotlin, 全栈开发, node.js, javascript"><meta name="description" content="经验总结和日常学习的个人博客。"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=yes"><meta name="mobile-web-app-capable" content="yes"><meta name="robots" content="all"><link rel="canonical" href="https://handsomeliuyang.github.io/2016/11/15/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/React%E5%AE%9E%E7%8E%B0MergeRequest%E7%AE%A1%E7%90%86/index.html"><link rel="icon" type="image/png" href="/hexo-img/favicon.png" sizes="32x32"><link rel="stylesheet" href="/scss/base/index.css"><link rel="alternate" href="/atom.xml" title="刘阳" type="application/atom+xml"><link rel="stylesheet" href="/scss/views/page/post.css"><meta name="generator" content="Hexo 6.3.0"></head><body ontouchstart><div id="page-loading" class="page page-loading" style="background-image:url(/hexo-img/loading.gif)"></div><div id="page" class="page js-hidden"><header class="page__small-header page__header--small"><nav class="page__navbar"><div class="page__container navbar-container"><a class="page__logo" href="/" title="刘阳" alt="刘阳"><img src="/hexo-img/favicon.png" alt="刘阳"></a><nav class="page__nav"><ul class="nav__list clearfix"><li class="nav__item"><a href="/" alt="首页" title="首页">首页</a></li><li class="nav__item"><a href="/archives" alt="归档" title="归档">归档</a></li><li class="nav__item"><a href="/about" alt="关于" title="关于">关于</a></li></ul></nav><button class="page__menu-btn" type="button"><i class="iconfont icon-menu"></i></button></div></nav></header><main class="page__container page__main"><div class="page__content"><article class="page__post"><div class="post__cover"><img src="/hexo-img/default_cover.png" alt="React实现MergeRequest管理"></div><header class="post__info"><h1 class="post__title">React实现MergeRequest管理</h1><div class="post__mark"><div class="mark__block"><i class="mark__icon iconfont icon-write"></i><ul class="mark__list clearfix"><li class="mark__item"><a target="_blank" rel="noopener" href="https://github.com/handsomeliuyang">liuyang</a></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-time"></i><ul class="mark__list clearfix"><li class="mark__item"><span>2016-11-15</span></li></ul></div><div class="mark__block"><i class="mark__icon iconfont icon-tab"></i><ul class="mark__list clearfix"><li class="mark__item"><a href="/tags/Robot/">Robot</a></li><li class="mark__item"><a href="/tags/React/">React</a></li><li class="mark__item"><a href="/tags/nodejs/">Nodejs</a></li></ul></div></div></header><div class="post__content"><h2 id="什么是React"><a href="#什么是React" class="headerlink" title="什么是React"></a>什么是React</h2><p>React是一个前端框架，与其类似的有vue、angular 2.x等等。改变前端开发模式，让前端开发更加方便，让前端也使用面向对象的方案来开发。相关的一些特点可以看其官方文档</p><h2 id="ES6-JSX"><a href="#ES6-JSX" class="headerlink" title="ES6,JSX"></a>ES6,JSX</h2><p>JavaScript是一个统称，其标准的名称为：<strong>ECMAScript</strong>。ES6, ES5是两个不同的标准，现在的主流浏览器都完全支持<strong>ES5</strong>的语法，不支持最新标准<strong>ES6</strong>。ES6有很多的新特性，更适合面向对象的开发模式，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//es5</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyComponent</span> = <span class="title class_">React</span>.<span class="title function_">createClass</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;&lt;/&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">MyComponent</span>;</span><br><span class="line"><span class="comment">//es6</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;&lt;/&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="title class_">MyComponent</span> <span class="title class_">Apply</span>;</span><br></pre></td></tr></table></figure><p>ES6才支持模块化，ES5不支持，如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>,</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>为了更方便开发及代码可读性，React里引入了模板语法：JSX，对比如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 使用JSX的写法</span><br><span class="line">class Hello extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;Hello &#123;this.props.toWhat&#125;&lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Hello toWhat=&quot;World&quot; /&gt;,</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">// 使用原生的Javascript的写法，注意同时使用了ES6</span><br><span class="line">class Hello extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return React.createElement(&#x27;div&#x27;, null, `Hello $&#123;this.props.toWhat&#125;`);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  React.createElement(Hello, &#123;toWhat: &#x27;World&#x27;&#125;, null),</span><br><span class="line">  document.getElementById(&#x27;root&#x27;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ES6，JSX原生浏览器都不支持，就需要进行预编译（即转码）。React推荐使用Babel</p><blockquote><p>Babel是一个javascript的转换器，类似于gradle一样，支持各种插件。</p></blockquote><blockquote><p>FaceBook开发了一个用于转换JSX的Babel插件：babel-preset-react。</p></blockquote><blockquote><p>转换ES6的Babel插件为：babel-preset-es2015</p></blockquote><blockquote><p>更多请点周：<a target="_blank" rel="noopener" href="https://babeljs.io/">Babel官网</a></p></blockquote><p>为了让浏览器能运行React的代码，有两种方案：</p><p>一：实时编译，即让浏览器来编译，配置很简单，如下所示</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>特点：这种方式为浏览器编译，因为实时编译会很慢，所以适合代码量比较小的</p><p>二：本地编译，即在Server端或本地提前编译好，这样就需要使用打包工具：browserify或webpack，React推荐使用Browserify（<a target="_blank" rel="noopener" href="http://browserify.org/">browserify官网</a>）。下面使用的是延时方案，即用户访问资源时，才进行转换，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">&#x27;browserify-middleware&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把Browserify的环境切换为正式环境，其配置如下：</span></span><br><span class="line"><span class="comment">/*process.env.NODE_ENV = &#x27;production&#x27;;</span></span><br><span class="line"><span class="comment">browserify.settings.mode = &#x27;production&#x27;;*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> shared = [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;react-dom&#x27;</span>];</span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/react/base_bundle.js&#x27;</span>, <span class="title function_">browserify</span>(shared));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为了不总是配置，直接进行环境配置</span></span><br><span class="line">browserify.<span class="property">settings</span>.<span class="property">external</span> = shared;</span><br><span class="line">browserify.<span class="property">settings</span>.<span class="property">transform</span> = <span class="string">&#x27;babelify&#x27;</span>;</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&#x27;/react/app_bundle.js&#x27;</span>, <span class="title function_">browserify</span>(<span class="string">&#x27;client/merge_manager/app.js&#x27;</span>));</span><br></pre></td></tr></table></figure><p>特点：方便，不用手动转换，除代码变动后的首次访问慢之外，没有性能问题，浏览器也不用转换运行</p><h2 id="JSX的属性与Html的属性"><a href="#JSX的属性与Html的属性" class="headerlink" title="JSX的属性与Html的属性"></a>JSX的属性与Html的属性</h2><p>JSX是一个模块语法，是为了代码的可读性，但与html并不完全一样，其中最大的区别，有如下几点：</p><p>1.JSX支持表达式，但只支持一个表达式，不支持代码块：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接访问变量</span></span><br><span class="line">&lt;img src=&#123;user.<span class="property">avatarUrl</span>&#125; /&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;</span>&#x27;<span class="attr">http:</span>//<span class="attr">www.58.com</span>&#x27; + &#x27;/<span class="attr">a.png</span>&#x27;&#125; /&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环</span></span><br><span class="line"><span class="keyword">const</span> todos = [<span class="string">&#x27;finish doc&#x27;</span>, <span class="string">&#x27;submit pr&#x27;</span>, <span class="string">&#x27;nag dan to review&#x27;</span>];</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  		&#123;todos.map((message) =&gt; <span class="tag">&lt;<span class="name">Item</span> <span class="attr">key</span>=<span class="string">&#123;message&#125;</span> <span class="attr">message</span>=<span class="string">&#123;message&#125;</span> /&gt;</span>)&#125;</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>2.class属性由于是ES6里的关键字，所以需要使用className，如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;button&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>3.html的属性的命名都是小写，但JSX里的属性都是驼峰命名法，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=<span class="string">&quot;xxx&quot;</span> tabIndex=<span class="string">&quot;xxx&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>4.样式style，JSX把style当作字典对象来处理的，不能当字符来处理：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=&#123;&#123;<span class="attr">color</span>:<span class="string">&#x27;blue&#x27;</span>, <span class="attr">backgroundImage</span>:<span class="string">&#x27;xxx&#x27;</span>&#125;&#125;&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>javascript的ES5是不支持模块的，即类不能分文件，即不能运行如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// CommonJs，nodejs才支持</span><br><span class="line">var React = require(&#x27;react&#x27;);</span><br><span class="line">var ReactDOM = require(&#x27;react-dom&#x27;);</span><br><span class="line">var TopBar = require(&#x27;../common/header.js&#x27;);</span><br><span class="line">var SideBar = require(&#x27;../common/sidebar_nav.js&#x27;);</span><br><span class="line">var Footer = require(&#x27;../common/footer.js&#x27;);</span><br><span class="line"></span><br><span class="line">// ES6才支持，ES5不支持</span><br><span class="line">import React from &#x27;react&#x27;;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;;</span><br></pre></td></tr></table></figure><p>由于运行前，会使用Babel进行转换，所以React开发时，可以支持模块化，即可以使用Nodejs支持的CommonJs，也可以使用ES6的import模式。React推荐使用CommonJs的方式。</p><h2 id="React与传统html开发思想对比"><a href="#React与传统html开发思想对比" class="headerlink" title="React与传统html开发思想对比"></a>React与传统html开发思想对比</h2><h3 id="传统开发"><a href="#传统开发" class="headerlink" title="传统开发"></a>传统开发</h3><p>html为界面，js为逻辑，分开开发，如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		...</span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="comment">// js代码</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>模板语言：<a target="_blank" rel="noopener" href="http://www.embeddedjs.com/">EJS</a>。为了插件业务数据，实现业务后台的MVC</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&lt;% if (!locals.username) &#123; %&gt;</span></span><br><span class="line"><span class="language-xml">	    	<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav navbar-nav navbar-right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	     		<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>&lt;%= locals.username %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	    	<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    	&lt;% &#125; %&gt;</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><h3 id="React开发"><a href="#React开发" class="headerlink" title="React开发"></a>React开发</h3><p>基于组件，一个控件的界面与逻辑都在一起，控件可以复用，与Native的开发模式比较类似，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Clock</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>()&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 组件已经与Dom上绑定完了</span></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 组件与Dom解绑</span></span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>It is &#123;this.state.date.toLocaleTimeString()&#125;.<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>上面使用的是ES6的语法，与Android的Fragment比较像，界面与业务逻辑都在此类里完成</li><li>上面的方法为React组件的生命周期方法</li></ol><p>数据的获取方式：与传统方式不一样，而是通过Ajax来请求，与Native开发一下，界面与Service只通过接口来交互，但没有使用Server端的模板语言EJS</p><h2 id="React的生命周期"><a href="#React的生命周期" class="headerlink" title="React的生命周期"></a>React的生命周期</h2><p><img src="/React%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png"><br>关键点：</p><p>1.我们开发的Api就是这些生命周期方法</p><p>2.this.props.xx，this.state.xx是两个数据相关的对象，共中props对象只读，而state是可以修改</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">SideBar</span> activeKey=<span class="string">&#x27;merge_manager&#x27;</span> /&gt; <span class="comment">// 只能通过这种方式修改props</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(xxx) <span class="comment">// 修改State数据，组件并进行刷新</span></span><br></pre></td></tr></table></figure><p>3.在组件绑定到Dom里后，就可以通过jquery的方法，可以获取组件的dom元素</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">componentDidMount</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  	$(<span class="string">&#x27;#target-branch-select&#x27;</span>).<span class="title function_">chosen</span>(&#123;<span class="attr">width</span>: <span class="string">&quot;100%&quot;</span>&#125;);</span><br><span class="line">   	$(<span class="string">&#x27;#assignee-select&#x27;</span>).<span class="title function_">chosen</span>(&#123;<span class="attr">width</span>: <span class="string">&quot;100%&quot;</span>&#125;);</span><br><span class="line">   	$(<span class="string">&#x27;#title-select&#x27;</span>).<span class="title function_">chosen</span>(&#123;<span class="attr">width</span>: <span class="string">&quot;100%&quot;</span>&#125;);</span><br><span class="line">	$(<span class="string">&#x27;#author-select&#x27;</span>).<span class="title function_">chosen</span>(&#123;<span class="attr">width</span>: <span class="string">&quot;100%&quot;</span>&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="React的生命周期与Android的生命周期对比"><a href="#React的生命周期与Android的生命周期对比" class="headerlink" title="React的生命周期与Android的生命周期对比"></a>React的生命周期与Android的生命周期对比</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">InitEnvir</span> = <span class="title class_">React</span>.<span class="title function_">createClass</span>(&#123;</span><br><span class="line">	<span class="attr">render</span>: <span class="title function_">funcation</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render...&#x27;</span>);</span><br><span class="line">		<span class="keyword">return</span> (</span><br><span class="line">			<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">		);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">componentDidMount</span>: <span class="title function_">funcation</span>(<span class="params"></span>)&#123;	</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;componentDidMount begin...&#x27;</span>);</span><br><span class="line">		<span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;newData&#125;);</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;componentDidMount end...&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>上面代码的执行结果为：</p><table><thead><tr><th align="center">Android机制</th><th align="center">React机制</th></tr></thead><tbody><tr><td align="center">render…<br>componentDidMount begin…<br>componentDidMount end…<br>render…</td><td align="center">render…<br>componentDidMount begin…<br>render…<br>componentDidMount end…</td></tr></tbody></table><p>这个是Android机制与React机制最大的差别，Android的UI线程，有一个MainLoop队列。</p><h2 id="React实现页面框架"><a href="#React实现页面框架" class="headerlink" title="React实现页面框架"></a>React实现页面框架</h2><p><img src="/MergeRequest.png"></p><h2 id="DataTables框架"><a href="#DataTables框架" class="headerlink" title="DataTables框架"></a>DataTables框架</h2><p>表格数据使用的是DataTables组件(<a target="_blank" rel="noopener" href="https://datatables.net/">datatables官网</a>)</p><p>由于数据量不大，使用的是前端排序，查询，过滤。数据量尽量不要超过1000。如果对于大数据，就需要Server进行配合</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ol><li><a target="_blank" rel="noopener" href="https://facebook.github.io/react/docs/hello-world.html">React文档</a></li><li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/Mrs-cc/p/4969755.html">React入门 (1)—使用指南（包括ES5和ES6对比）</a></li></ol><div class="post-announce">感谢您的阅读，本文由 <a href="https://handsomeliuyang.github.io">刘阳</a> 版权所有。如若转载，请注明出处：刘阳（<a href="https://handsomeliuyang.github.io/2016/11/15/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/React%E5%AE%9E%E7%8E%B0MergeRequest%E7%AE%A1%E7%90%86/">https://handsomeliuyang.github.io/2016/11/15/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/React%E5%AE%9E%E7%8E%B0MergeRequest%E7%AE%A1%E7%90%86/</a>）</div><div class="post__prevs"><div class="post__prev"><a href="/2016/06/13/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/2016-04-14-Android%E7%AD%BE%E5%90%8D%E7%9A%84%E8%BF%87%E7%A8%8B/" title="Android签名的过程"><i class="iconfont icon-prev"></i>Android签名的过程</a></div><div class="post__prev post__prev--right"><a href="/2016/12/30/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/Robot%E6%A1%86%E6%9E%B6-Nodejs+Express+React+MaterialUI/" title="前端学习系列：基于React的Robot框架的踩坑之旅">前端学习系列：基于React的Robot框架的踩坑之旅<i class="iconfont icon-next"></i></a></div></div></div></article></div><aside class="page__sidebar"><form id="page-search-from" class="page__search-from" action="/search/"><label class="search-form__item"><input class="input" type="text" name="search" placeholder="Search..."> <i class="iconfont icon-search"></i></label></form><div class="sidebar__block"><h3 class="block__title">简介</h3><p class="block__text">经验总结和日常学习的个人博客。</p></div><div class="sidebar__block"><h3 class="block__title">文章分类</h3><ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/">经验总结</a><span class="block-list-count">32</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/">日常学习</a><span class="block-list-count">29</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%96%87%E7%AB%A0%E8%BD%AC%E5%8F%91/">文章转发</a><span class="block-list-count">1</span></li></ul></div><div class="sidebar__block"><h3 class="block__title">最新文章</h3><ul class="block-list latest-post-list"><li class="latest-post-item"><a href="/2023/10/08/%E6%97%A5%E5%B8%B8%E5%AD%A6%E4%B9%A0/Android%E5%86%85%E6%A0%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%9AAndroid%E8%BF%9B%E7%A8%8B%E7%BA%BF%E7%A8%8B%E7%AE%A1%E7%90%86/" title="Android内核学习笔记：Android进程\线程管理"><div class="item__cover"><img src="/hexo-img/default_cover.png" alt="Android内核学习笔记：Android进程\线程管理"></div><div class="item__info"><h3 class="item__title">Android内核学习笔记：Android进程\线程管理</h3><span class="item__text">2023-10-08</span></div></a></li><li class="latest-post-item"><a href="/2023/08/08/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/ASM%E5%AD%A6%E4%B9%A0%E5%BF%83%E5%BE%97/" title="ASM 学习心得"><div class="item__cover"><img src="/hexo-img/default_cover.png" alt="ASM 学习心得"></div><div class="item__info"><h3 class="item__title">ASM 学习心得</h3><span class="item__text">2023-08-08</span></div></a></li><li class="latest-post-item"><a href="/2023/02/22/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/App%E7%9A%84Repo%E5%A4%9A%E4%BB%93%E5%BA%93%E7%AE%A1%E7%90%86/" title="App的Repo多仓库管理"><div class="item__cover"><img src="/hexo-img/default_cover.png" alt="App的Repo多仓库管理"></div><div class="item__info"><h3 class="item__title">App的Repo多仓库管理</h3><span class="item__text">2023-02-22</span></div></a></li><li class="latest-post-item"><a href="/2022/11/02/%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93/%E4%BB%8E%E5%BC%80%E5%8F%91%E8%80%85%E8%A7%92%E5%BA%A6%E6%80%9D%E8%80%83%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%9A%84%E4%BB%B7%E5%80%BC/" title="从开发者角度思考单元测试的价值"><div class="item__cover"><img src="/hexo-img/default_cover.png" alt="从开发者角度思考单元测试的价值"></div><div class="item__info"><h3 class="item__title">从开发者角度思考单元测试的价值</h3><span class="item__text">2022-11-02</span></div></a></li></ul></div><div class="sidebar__block"><h3 class="block__title">文章标签</h3><ul class="block-list tag-list clearfix"><li class="tag-item"><a class="tag-link" href="/tags/AOP/">AOP</a></li><li class="tag-item"><a class="tag-link" href="/tags/ASM/">ASM</a></li><li class="tag-item"><a class="tag-link" href="/tags/Android/">Android</a></li><li class="tag-item"><a class="tag-link" href="/tags/Android%E5%86%85%E6%A0%B8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Android内核学习笔记</a></li><li class="tag-item"><a class="tag-link" href="/tags/Dart/">Dart</a></li><li class="tag-item"><a class="tag-link" href="/tags/Flutter/">Flutter</a></li><li class="tag-item"><a class="tag-link" href="/tags/Gradle/">Gradle</a></li><li class="tag-item"><a class="tag-link" href="/tags/Kotlin/">Kotlin</a></li><li class="tag-item"><a class="tag-link" href="/tags/NAS/">NAS</a></li><li class="tag-item"><a class="tag-link" href="/tags/OpenGL/">OpenGL</a></li><li class="tag-item"><a class="tag-link" href="/tags/React/">React</a></li><li class="tag-item"><a class="tag-link" href="/tags/ReactNative/">ReactNative</a></li><li class="tag-item"><a class="tag-link" href="/tags/Robot/">Robot</a></li><li class="tag-item"><a class="tag-link" href="/tags/axure/">axure</a></li><li class="tag-item"><a class="tag-link" href="/tags/docker/">docker</a></li><li class="tag-item"><a class="tag-link" href="/tags/electron/">electron</a></li><li class="tag-item"><a class="tag-link" href="/tags/hexo/">hexo</a></li><li class="tag-item"><a class="tag-link" href="/tags/jenkins/">jenkins</a></li><li class="tag-item"><a class="tag-link" href="/tags/leetcode/">leetcode</a></li><li class="tag-item"><a class="tag-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-item"><a class="tag-link" href="/tags/python/">python</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/">开发模式</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E6%94%B6%E8%97%8F/">收藏</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E7%AE%97%E6%B3%95/">算法</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">自动化测试</a></li><li class="tag-item"><a class="tag-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul></div></aside></main><footer class="page__footer"><section class="footer__top"><div class="footer_wrap"><div class="footer_background"><div class="clouds"></div><div class="background"></div><div class="foreground"></div></div><div class="footer_content"><div><span class="face">ღゝ◡╹)ノ♡</span></div><div>"【人生若只如初见，何事秋风悲画扇】"</div></div></div></section><section class="footer__bottom"><div class="page__container footer__container"><p class="footer__copyright">© <a href="https://github.com/handsomeliuyang" target="_blank">刘阳</a> <a href="mailto:40610243@qq.com">40610243@qq.com</a></p><ul class="footer__social-network clearfix"></ul></div></section></footer><div id="back-top" class="back-top back-top--hidden js-hidden"><i class="iconfont icon-top"></i></div></div><script type="text/javascript" src="/js/common/utils.js"></script><script type="text/javascript" src="/js/common/pack.js"></script><script type="text/javascript" src="/js/common/animation.js"></script><script type="text/javascript" src="/js/layout/loading.js"></script><script type="text/javascript" src="/js/layout/header.js"></script><script type="text/javascript" src="/js/layout/back-top.js"></script><script type="text/javascript" src="/js/layout/post.js"></script><script src="/js/page/post.js"></script></body></html>