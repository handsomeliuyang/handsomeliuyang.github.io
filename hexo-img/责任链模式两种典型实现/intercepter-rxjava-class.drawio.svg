<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="838px" height="366px" viewBox="-0.5 -0.5 838 366" content="&lt;mxfile host=&quot;4768204c-c19c-48e3-b7f9-6c3be845f2f1&quot; modified=&quot;2021-01-20T06:53:35.545Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 11_0_0) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.52.1 Chrome/83.0.4103.122 Electron/9.3.5 Safari/537.36&quot; etag=&quot;WMaVjCkM_KBjmNzykYcn&quot; version=&quot;13.10.0&quot; type=&quot;embed&quot;&gt;&lt;diagram id=&quot;wHPrisvI2GNCY51EUG7T&quot; name=&quot;Page-1&quot;&gt;7Vpbj5s4FP41lqYPjbhfHiGXdqWuWu2stDuPDjjBOwRTcGYy++vXBgwYQ5LJpk2nalox+Ng+ts/ts48B5nx3+FDAPPmdxCgFhhYfgLkAhmHZNntywktNsA23JmwLHNckrSPc439RTdQFdY9jVDa0mkQJSSnOZWJEsgxFVKLBoiDPcrMNSWOJkMMtUgj3EUxV6l84pklDNTStq/iI8DYRQ/tiPWsYPW4Lss+aAYFhrvRVsFzW1TsomDXtywTG5LlHMpfAnBeE0Pptd5ijlMtWlttqoradeIEyek4Hv+7wBNM9EjOu5kVfhDBQFgdcpqy0Tkn0CMwwhmWCOAedFVj9CjOm5kKrS40+dbaYMKG7tGlX0oI8ojlJSVExNi3bDf0Fq9mw7j164C2CxZzTSUZ7dK36VWPQ4uVvPuDMFsWHdjassDi0s+GlF1E6YNrrxkoPvZquEy+IPqpAGxmjWLKhRrwfENkhNiZr8NyzHKdRd4FSSPGTbGawsdZt27dl94VgNqyhNY5lao16Gr9yNFtmUZJ9EaGmV1/tA0a2Zs9siZVtejIrCostogor9tJbZUeq7GrCKDXFyKIUlmVlZgWkaPuiGB3zi5y/7nfpqoA79ho+J5ii+xxGnP7M4o5sXgMjQtVvzOxMx/TN+Ih5CcXpVSkRfm7ox8zhCRUUHY4ahKi1fEnyht/Ip2cwntkEzKQXZUzHnjYYST/HlKErygCGk7IhwlxSgfN1z4NQuGN2gDNgBqxWyw/sWYlBq+nvKcnrOqtXxyRB38MUb5t+EZMWKjqe7G3b/K1Gxj0C3HHFpmrpN85jw9UvyHIXiSMTAx6Osi4UiiBUvCOUU1L0OKyH7RktH9KSgotNQJhYoT692IvEnKIN7cl5ineZw6yjdbLJ1mUur6PfEovVj7G5ixLIJmbMq/D1dY9K+q6eyR+ozElWogmu02KXxTjwfO5ImEFxUJvPojKwsDGmRS2HkLBWm7TCpE2FPZUz94GHl1dwh1PuZR9R+oQ4VzlkVDhd4RgXdvmIaJQ0hUE02WyiyPe5qHYM+oMyr3cd+pEoosQd37fm2lFIOT+GOJYnxRBLN5UY0sbdfgxxrCuEEOMHDCFjrhy8UV9W/LZ10POd8afyupv4mG0ZM2OwSbJdsW065Wj2NRzNfCOONq+t8k062wRwarhbXlkz+IRLOrIlabcN49uQSyDxNuuNuV8E9dJPLOAN6jMvSITK8k4Km2dtj4ahdSCQc1j8isrXisqGrQ+jsul7I1FZ93xB7cdl37xCXLYUTXXi04fiIwVNyJZkMP1EuP6qFv8gSl8aHcE9JbIyLklU8MIXVGC2GlT00x8XJEoUDXrG2nQc1RZiG3mxBdSMkMgYZSRDYJgjmjKcSfOo0xoNqVFqnZ+QgfJkTubs/MvZpmArEI03d3Us5ak3CRR4tYQrMx4u7969403d8SAxiC7aCKlAdF9kXYhbYWZrvTg3xthdTIekGD91pFX1XwNLB/hL4FlgaYMwBGEAlhYIPeCF4kVrXoKAN/Z8ELhgyYo68OZg6QPmeeGSU0IXBCv+4gXAM8DS5c/Q70VEaQbKpNSNh5axTUyFFIuq8Myew1Z3EqBXO+hOTVyMel9Ur5mErNR2GpKimanWVvGqQTrkYUpuXxX2s+58UAtCPh6cP15rSe1o050nEnYZoWck67o0+ec9TXGGGnoMi8fPrBemVSiaabYCTVKkkQKtErWc6jeCYDb/x3vUAdhXQXUQourfdRBMtx35UGFYCniZ3siRQr9KwHJGzhTfKOM/tXG4CN4uzfkzSLhvltYh8bKjXnMbI+GUO4JTN7w78DxrmPI3/HYr9doLBM8aXiBYImV94gKBWRZ86TXLeYPyyLx1Zd66d3RurqEd78Fe6llcfKPhvpGDeT96v6VD+a8M2I9w1nKd26a/Xnc5HWO4I1n8Z8INbxKjDOtMjBJ40wLMgww+p+6Y+8jW4tw4tn0rBBKfTlxyUvoGCKReOTuXgY/unGR1vdtrQ729vn2sv/mF6c+Y8W2OzydSeNLd6K8L0R/kQtRw9Jkjn6vaj2WkUObNHF+Fq2tciwp0usXJCsYujMZkvLYcW7P+z/npmt9MSehkqugkYu1tzkeGbD724DxzNjpp1glOVwQnNf343WxORIBpv/6eNnf6nH+eVRoje6Ybntod8cmp+OLP9y+zStc5wehio2TF7nvVunn3UbC5/A8=&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(241, 250, 238);"><defs/><g><path d="M 153 315 L 343.09 252.42" fill="none" stroke="#457b9d" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 355.44 248.35 L 345.12 258.59 L 341.06 246.24 Z" fill="none" stroke="#457b9d" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 0 L 100 0 L 100 6 L 90 21 L 0 21 Z" fill="#eeeeee" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><path d="M 100 0 L 837 0 L 837 365 L 0 365 L 0 21" fill="none" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 11px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">class strategy</div></div></div></foreignObject><text x="50" y="14" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">class strategy</text></switch></g><rect x="499" y="123" width="210" height="64" fill="#ffcc99" stroke="#994c00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 212px; height: 64px; padding-top: 123px; margin-left: 499px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 212px; height: 64px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 0px ; margin-top: 4px ; text-align: center"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>Interceptor</b></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px"><span>+ </span>intercept<span>(chain, request): Response</span><br /></p></div></div></div></foreignObject><text x="499" y="135" fill="#000000" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><rect x="393.25" y="267.5" width="210" height="54" fill="#ffcc99" stroke="#994c00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 212px; height: 54px; padding-top: 268px; margin-left: 393px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 212px; height: 54px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 0px ; margin-top: 4px ; text-align: center"><b>InterceptorA</b></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px">+ intercept(chain, request): Response<br /></p></div></div></div></foreignObject><text x="393" y="280" fill="#000000" font-family="Helvetica" font-size="12px">InterceptorA...</text></switch></g><rect x="102.25" y="108.5" width="189.5" height="93" fill="#ffcc99" stroke="#994c00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 192px; height: 93px; padding-top: 109px; margin-left: 102px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 192px; height: 93px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 0px ; margin-top: 4px ; text-align: center"><b>InterceptorChain</b></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px"><span>+ interceptors: List&lt;Interceptor&gt;</span><br /></p><p style="margin: 0px ; margin-left: 4px"><span>+ index: int</span></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px"><span>+ process(request): </span>Response<span> </span><br /></p></div></div></div></foreignObject><text x="102" y="121" fill="#000000" font-family="Helvetica" font-size="12px">InterceptorChain...</text></switch></g><path d="M 197 234 L 197 201.5" fill="none" stroke="#82b366" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 7 234 L 378 234 L 387 243 L 387 355 L 7 355 L 7 234 Z" fill="#f5f5f5" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><path d="M 378 234 L 378 243 L 387 243 Z" fill-opacity="0.05" fill="#000000" stroke="none" pointer-events="all"/><path d="M 378 234 L 378 243 L 387 243" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 378px; height: 1px; padding-top: 295px; margin-left: 9px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">if(index &gt;= interceptors.size()) {<br />    return processFinal(request);<br />}<br /><div>// 构建下一个执行链路节点</div><div>InterceptorChain next = new InterceptorChain(interceptors, index + 1);</div><div>Interceptor interceptor = interceptors.get(index);</div><div>Response response = interceptor.intercept(next, request);</div><div>return response;</div></div></div></div></foreignObject><text x="9" y="298" fill="#333333" font-family="Helvetica" font-size="12px">if(index &gt;= interceptors.size()) {...</text></switch></g><path d="M 721 267.5 L 721 238 Q 721 228 711 228 L 675.5 228 Q 665.5 228 655.5 228 L 614 228 Q 604 228 604 218 L 604 201.12" fill="none" stroke="#994c00" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 604 188.12 L 610.5 201.12 L 597.5 201.12 Z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/><rect x="616" y="267.5" width="210" height="54" fill="#ffcc99" stroke="#994c00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 212px; height: 54px; padding-top: 268px; margin-left: 616px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 212px; height: 54px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 0px ; margin-top: 4px ; text-align: center"><b>InterceptorB</b></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px">+ intercept(chain, request): Response<br /></p></div></div></div></foreignObject><text x="616" y="280" fill="#000000" font-family="Helvetica" font-size="12px">InterceptorB...</text></switch></g><path d="M 499 155 L 317.74 155" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 292.74 155 L 305.24 147.65 L 317.74 155 L 305.24 162.35 Z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/><rect x="112.66" y="12" width="168.69" height="64" fill="#ffcc99" stroke="#994c00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 171px; height: 64px; padding-top: 12px; margin-left: 113px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; width: 171px; height: 64px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; width: 100%; height: 100%; white-space: nowrap; "><p style="margin: 0px ; margin-top: 4px ; text-align: center"><i>&lt;&lt;Interface&gt;&gt;</i><br /><b>Chain</b></p><hr size="1" /><p style="margin: 0px ; margin-left: 4px"><span>+ process</span><span>(request): Response</span><br /></p></div></div></div></foreignObject><text x="113" y="24" fill="#000000" font-family="Helvetica" font-size="12px">&lt;&lt;Interface&gt;&gt;...</text></switch></g><path d="M 197 108.5 L 197 90.12" fill="none" stroke="#b46504" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 197 77.12 L 203.5 90.12 L 190.5 90.12 Z" fill="none" stroke="#b46504" stroke-miterlimit="10" pointer-events="all"/><path d="M 498.25 267.5 L 498.29 237.3 Q 498.3 227.3 508.3 227.3 L 594 227.3 Q 604 227.3 604 217.3 L 604 201.12" fill="none" stroke="#994c00" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 604 188.12 L 610.5 201.12 L 597.5 201.12 Z" fill="none" stroke="#994c00" stroke-miterlimit="10" pointer-events="all"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>